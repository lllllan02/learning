@use "./base.scss";

:root {
  --article-font-size: 1.2rem;
  --article-line-height: 2rem;
  --article-margin: 1rem;
  --article-h1-size: 1.8rem;
  --article-h2-size: 1.5rem;
  --article-h3-size: 1.35rem;
  --article-h4-size: 1.25rem;
}

// 自定义字号及排版设置
article {
  font-size: var(--article-font-size);
  line-height: var(--article-line-height);

  // 标题层级优化
  h1 { font-size: var(--article-h1-size); margin-top: 1.8rem; }
  h2 { font-size: var(--article-h2-size); margin-top: 1.6rem; }
  h3 { font-size: var(--article-h3-size); margin-top: 1.4rem; }
  h4 { font-size: var(--article-h4-size); margin-top: 1.2rem; }

  /* 增大段落及块级元素间距 */
  p, ul, ol, dl, blockquote {
    margin-top: var(--article-margin);
    margin-bottom: var(--article-margin);
  }

  /* 列表项保持较小的间距 */
  li {
    margin-top: 0.5rem;
    margin-bottom: 0.5rem;
  }

  // 增强加粗字体对比度
  strong {
    font-weight: 700;
    color: var(--dark);
    text-shadow: 0.2px 0 currentColor; // 模拟更粗的效果
    padding: 0 1px;
  }

  // 马克笔效果（用于下划线语法）
  u {
    text-decoration: none; // 移除默认下划线
    // 使用青蓝色 (Cyan) 马克笔，以区分默认的黄色高亮 (==)
    background: linear-gradient(transparent 65%, color-mix(in srgb, #00bcd4 40%, transparent) 65%);
    padding: 0 1px;
  }
}

// 使图片居中显示
img {
  display: block;
  margin: 0 auto;
}

// 图片并排显示容器
.image-row {
  display: flex;
  flex-direction: row;
  justify-content: center;
  gap: 1rem;
  margin: 1.5rem 0;
  align-items: flex-start;

  @media all and (max-width: 600px) {
    flex-direction: column;
    align-items: center;
  }

  // 统一处理直接子元素（可能是 p, a 或 img）
  & > * {
    margin: 0 !important;
    flex: 1;
    display: flex;
    justify-content: center;
    max-width: calc(50% - 0.5rem);

    @media all and (max-width: 600px) {
      max-width: 100%;
      width: 100%;
    }
    
    // 如果子元素里还有 p（由于 markdown 渲染嵌套）
    p {
      margin: 0;
      width: 100%;
      display: flex;
      justify-content: center;
    }
  }

  img {
    display: block;
    margin: 0 !important;
    max-width: 100%;
    height: auto;
    border-radius: 8px;
  }
}

// 使 Mermaid 图表居中
pre:has(> code.mermaid) {
  display: flex;
  justify-content: center;
  background: transparent;
}

// 首页美化样式
body[data-slug="index"] {
  // 隐藏首页默认标题
  .article-title {
    display: none; 
  }

  // 隐藏首页日期等元数据
  .content-meta {
    display: none; 
  }

  // 调整 Callout 样式
  .callout {
    margin: 1rem 0;
    border-radius: 8px;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
    
    &:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
    }
    
    .callout-title {
      font-weight: 600;
    }
  }

  // 最近更新组件样式优化
  .recent-notes {
    margin-top: 2rem;
    
    & > h3 {
      margin-bottom: 1rem;
    }
  }
}

// 表格样式优化：自动铺满最大宽度
.table-container {
  & > table {
    width: 100%;      // 强制表格宽度为 100%
    margin-left: 0;   // 移除默认边距
    margin-right: 0;  // 移除默认边距
    display: table;   // 确保表格布局模式正确
    table-layout: auto; // 默认根据内容调整列宽，如需均匀分布可改为 fixed
  }
}

// 右侧目录及反向链接文字超过宽度显示省略号
.toc ul, .backlinks ul {
  & > li > a {
    display: block;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }
}
